"0","# Load required libraries"
"0","library(ggplot2)"
"0","library(dplyr)"
"2","
Attaching package: ‘dplyr’

"
"2","The following objects are masked from ‘package:stats’:

    filter, lag

"
"2","The following objects are masked from ‘package:base’:

    intersect, setdiff, setequal, union

"
"0","library(gridExtra)"
"2","
Attaching package: ‘gridExtra’

"
"2","The following object is masked from ‘package:dplyr’:

    combine

"
"0","# Data Input for 2-Year Time Horizon"
"0","data_2year <- data.frame("
"0","  # Risk_Group: Each group includes Diabetic, Hypertensive, CKD Medium Risk, CKD High Risk, CKD Very High Risk"
"0","  Risk_Group = rep(c(""Diabetic"", ""Hypertensive"", ""CKD Medium Risk"", ""CKD High Risk"", ""CKD Very High Risk""), each = 8),"
"0","  "
"0","  # Population groups: All Populations, Asian Population, Black Population, White Population"
"0","  Population = rep(c(""All Populations"", ""Asian Population"", ""Black Population"", ""White Population""), times = 10),"
"0","  "
"0","  # Model_Comparison: Alternates between CKD-EPI 2021 vs CKD-EPI 2009 and CKD-EPI 2021 vs MDRD"
"0","  Model_Comparison = rep(c(""CKD-EPI 2021 vs CKD-EPI 2009"", ""CKD-EPI 2021 vs MDRD""), each = 4, times = 5),"
"0","  "
"0","  # Difference in Harrell's C-statistic"
"0","  # For each group, the first 4 rows = ""2021 vs 2009"", and the next 4 rows = ""2021 vs MDRD"""
"0","  Difference = c("
"0","    # Diabetic: CKD-EPI 2021 vs CKD-EPI 2009"
"0","    0.02, 0.03, 0.04, -0.01, "
"0","    # Diabetic: CKD-EPI 2021 vs MDRD"
"0","    -0.10, -0.05, 0.00, 0.10, "
"0",""
"0","    # Hypertensive: CKD-EPI 2021 vs CKD-EPI 2009"
"0","    -0.01, -0.02, 0.00, 0.02, "
"0","    # Hypertensive: CKD-EPI 2021 vs MDRD"
"0","    -0.20, -0.15, -0.10, -0.05,"
"0",""
"0","    # CKD Medium Risk: CKD-EPI 2021 vs CKD-EPI 2009"
"0","    0.05, 0.04, 0.03, 0.02, "
"0","    # CKD Medium Risk: CKD-EPI 2021 vs MDRD"
"0","    0.00, 0.01, -0.01, -0.02,"
"0",""
"0","    # CKD High Risk: CKD-EPI 2021 vs CKD-EPI 2009"
"0","    0.06, 0.07, 0.08, 0.05, "
"0","    # CKD High Risk: CKD-EPI 2021 vs MDRD"
"0","    0.02, 0.04, 0.03, 0.01,"
"0",""
"0","    # CKD Very High Risk: CKD-EPI 2021 vs CKD-EPI 2009"
"0","    -0.017, 0.056, 0.044, 0.084, "
"0","    # CKD Very High Risk: CKD-EPI 2021 vs MDRD"
"0","    -0.030, 0.050, 0.070, 0.080"
"0","  ),"
"0","  "
"0","  # Lower Confidence Interval for each Difference"
"0","  CI_Lower = c("
"0","    # Diabetic: 2021 vs 2009"
"0","    0.00, 0.01, 0.02, -0.03, "
"0","    # Diabetic: 2021 vs MDRD"
"0","    -0.15, -0.10, -0.05, 0.05, "
"0",""
"0","    # Hypertensive: 2021 vs 2009"
"0","    -0.03, -0.04, -0.02, 0.00, "
"0","    # Hypertensive: 2021 vs MDRD"
"0","    -0.25, -0.20, -0.15, -0.10,"
"0",""
"0","    # CKD Medium Risk: 2021 vs 2009"
"0","    0.03, 0.02, 0.01, 0.00, "
"0","    # CKD Medium Risk: 2021 vs MDRD"
"0","    -0.02, -0.01, -0.03, -0.05,"
"0",""
"0","    # CKD High Risk: 2021 vs 2009"
"0","    0.04, 0.05, 0.06, 0.03, "
"0","    # CKD High Risk: 2021 vs MDRD"
"0","    0.00, 0.02, 0.01, -0.01,"
"0",""
"0","    # CKD Very High Risk: 2021 vs 2009"
"0","    -0.03, 0.03, 0.02, 0.05, "
"0","    # CKD Very High Risk: 2021 vs MDRD"
"0","    -0.04, 0.02, 0.04, 0.06"
"0","  ),"
"0","  "
"0","  # Upper Confidence Interval for each Difference"
"0","  CI_Upper = c("
"0","    # Diabetic: 2021 vs 2009"
"0","    0.04, 0.05, 0.06, 0.01, "
"0","    # Diabetic: 2021 vs MDRD"
"0","    -0.05, 0.00, 0.05, 0.15, "
"0",""
"0","    # Hypertensive: 2021 vs 2009"
"0","    0.01, 0.00, 0.02, 0.04, "
"0","    # Hypertensive: 2021 vs MDRD"
"0","    -0.15, -0.10, -0.05, 0.00,"
"0",""
"0","    # CKD Medium Risk: 2021 vs 2009"
"0","    0.07, 0.06, 0.05, 0.04, "
"0","    # CKD Medium Risk: 2021 vs MDRD"
"0","    0.02, 0.03, 0.01, 0.00,"
"0",""
"0","    # CKD High Risk: 2021 vs 2009"
"0","    0.08, 0.09, 0.10, 0.07, "
"0","    # CKD High Risk: 2021 vs MDRD"
"0","    0.04, 0.06, 0.05, 0.03,"
"0",""
"0","    # CKD Very High Risk: 2021 vs 2009"
"0","    0.00, 0.08, 0.06, 0.10, "
"0","    # CKD Very High Risk: 2021 vs MDRD"
"0","    -0.01, 0.08, 0.09, 0.10"
"0","  )"
"0",")"
"0",""
"0","# Function to generate plots for a given dataset and time horizon"
"0","plot_superiority <- function(data, time_horizon) {"
"0","  ggplot(data, aes(x = Difference, y = Risk_Group, color = Model_Comparison)) +"
"0","    geom_point(position = position_dodge(width = 0.6), size = 2.5) +"
"0","    geom_errorbar(aes(xmin = CI_Lower, xmax = CI_Upper), "
"0","                  width = 0.2, position = position_dodge(width = 0.6)) +"
"0","    geom_vline(xintercept = 0, linetype = ""dashed"", color = ""black"", size = 0.8) +"
"0","    facet_wrap(~ Population, ncol = 2, scales = ""free_y"") +"
"0","    labs("
"0","      title = paste(""Superiority Test Across Populations For"", time_horizon, ""Prediction""),"
"0","      x = ""Difference in C-Statistic"","
"0","      y = ""Risk Group"","
"0","      color = ""Models Compared"""
"0","    ) +"
"0","    theme_minimal(base_size = 14) +"
"0","    theme("
"0","      legend.position = ""bottom"","
"0","      plot.title = element_text(hjust = 0.5, face = ""bold""),"
"0","      strip.text = element_text(face = ""bold"", size = 12),"
"0","      axis.text.y = element_text(size = 11, face = ""bold""),"
"0","      axis.title.x = element_text(face = ""bold""),"
"0","      axis.title.y = element_text(face = ""bold"")"
"0","    )"
"0","}"
"0",""
"0","# Generate the 2-Year"
"0","plot_2year <- plot_superiority(data_2year, ""2-Year"")"
"2","Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
Please use `linewidth` instead."
"0","plot_2year"
